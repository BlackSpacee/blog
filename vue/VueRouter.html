<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue-Router | Sunny</title>
    <meta name="description" content="记录生活,vuepress,web前端,技术博客,技术分享">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="icon" href="/logo.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/assets/css/0.styles.c8a60675.css" as="style"><link rel="preload" href="/assets/js/app.da8279db.js" as="script"><link rel="preload" href="/assets/js/2.09c1df90.js" as="script"><link rel="preload" href="/assets/js/64.cb833996.js" as="script"><link rel="preload" href="/assets/js/3.c0db3266.js" as="script"><link rel="prefetch" href="/assets/js/10.792c9595.js"><link rel="prefetch" href="/assets/js/11.ad956743.js"><link rel="prefetch" href="/assets/js/12.d9b45204.js"><link rel="prefetch" href="/assets/js/13.06bdfee6.js"><link rel="prefetch" href="/assets/js/14.eba37fb9.js"><link rel="prefetch" href="/assets/js/15.cbc381f4.js"><link rel="prefetch" href="/assets/js/16.43b2ce6d.js"><link rel="prefetch" href="/assets/js/17.701430d8.js"><link rel="prefetch" href="/assets/js/18.3e3227f3.js"><link rel="prefetch" href="/assets/js/19.25458a06.js"><link rel="prefetch" href="/assets/js/20.05942889.js"><link rel="prefetch" href="/assets/js/21.1f501939.js"><link rel="prefetch" href="/assets/js/22.16ef9af4.js"><link rel="prefetch" href="/assets/js/23.97537190.js"><link rel="prefetch" href="/assets/js/24.f4e42b6b.js"><link rel="prefetch" href="/assets/js/25.b2f33d75.js"><link rel="prefetch" href="/assets/js/26.74a50450.js"><link rel="prefetch" href="/assets/js/27.69251278.js"><link rel="prefetch" href="/assets/js/28.a672144c.js"><link rel="prefetch" href="/assets/js/29.6263a2fd.js"><link rel="prefetch" href="/assets/js/30.2e794242.js"><link rel="prefetch" href="/assets/js/31.c616e1f1.js"><link rel="prefetch" href="/assets/js/32.54261b92.js"><link rel="prefetch" href="/assets/js/33.1c61b40e.js"><link rel="prefetch" href="/assets/js/34.d03a008d.js"><link rel="prefetch" href="/assets/js/35.0c6517e0.js"><link rel="prefetch" href="/assets/js/36.9a59e2fa.js"><link rel="prefetch" href="/assets/js/37.0da503b5.js"><link rel="prefetch" href="/assets/js/38.e35ba786.js"><link rel="prefetch" href="/assets/js/39.985e47a3.js"><link rel="prefetch" href="/assets/js/4.64f8a00c.js"><link rel="prefetch" href="/assets/js/40.6060fdbb.js"><link rel="prefetch" href="/assets/js/41.b894ba43.js"><link rel="prefetch" href="/assets/js/42.f73d37bc.js"><link rel="prefetch" href="/assets/js/43.4a91b340.js"><link rel="prefetch" href="/assets/js/44.c35891d4.js"><link rel="prefetch" href="/assets/js/45.5956063c.js"><link rel="prefetch" href="/assets/js/46.15ecb34c.js"><link rel="prefetch" href="/assets/js/47.967a13e5.js"><link rel="prefetch" href="/assets/js/48.edccff42.js"><link rel="prefetch" href="/assets/js/49.63f043a1.js"><link rel="prefetch" href="/assets/js/5.f6966e72.js"><link rel="prefetch" href="/assets/js/50.dda6c6c4.js"><link rel="prefetch" href="/assets/js/51.3cc13e49.js"><link rel="prefetch" href="/assets/js/52.044ff865.js"><link rel="prefetch" href="/assets/js/53.844f8ff1.js"><link rel="prefetch" href="/assets/js/54.5cf351e9.js"><link rel="prefetch" href="/assets/js/55.ac9f233f.js"><link rel="prefetch" href="/assets/js/56.2a8029ef.js"><link rel="prefetch" href="/assets/js/57.fc4774e0.js"><link rel="prefetch" href="/assets/js/58.bafc5295.js"><link rel="prefetch" href="/assets/js/59.b4ce9c07.js"><link rel="prefetch" href="/assets/js/6.1d31d62f.js"><link rel="prefetch" href="/assets/js/60.a1370413.js"><link rel="prefetch" href="/assets/js/61.178fb243.js"><link rel="prefetch" href="/assets/js/62.88c09f00.js"><link rel="prefetch" href="/assets/js/63.93b7be73.js"><link rel="prefetch" href="/assets/js/65.37f298d6.js"><link rel="prefetch" href="/assets/js/66.58ce4375.js"><link rel="prefetch" href="/assets/js/67.f63ce476.js"><link rel="prefetch" href="/assets/js/68.e8f43c7e.js"><link rel="prefetch" href="/assets/js/7.786c12d1.js"><link rel="prefetch" href="/assets/js/8.c26d80ae.js"><link rel="prefetch" href="/assets/js/9.911fcd57.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c8a60675.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Sunny</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue.js Menu" class="dropdown-title"><span class="title">Vue.js</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/Vue.js.html" class="nav-link">
  Vue.js
</a></li><li class="dropdown-item"><!----> <a href="/vue/VueRouter/" class="nav-link">
  Vue-Router
</a></li><li class="dropdown-item"><!----> <a href="/vue/Vuex/" class="nav-link">
  Vuex
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React Menu" class="dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react/react/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/react/redux/" class="nav-link">
  Redux
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CSS Menu" class="dropdown-title"><span class="title">CSS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/css3/css3/" class="nav-link">
  css3
</a></li><li class="dropdown-item"><!----> <a href="/百分比/百分比/" class="nav-link">
  流式布局
</a></li><li class="dropdown-item"><!----> <a href="/rem/rem/" class="nav-link">
  rem
</a></li><li class="dropdown-item"><!----> <a href="/flex/flex/" class="nav-link">
  flex
</a></li><li class="dropdown-item"><!----> <a href="/less/less/" class="nav-link">
  Less
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript Menu" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/jQuery/jQuery/" class="nav-link">
  jQuery
</a></li><li class="dropdown-item"><!----> <a href="/ES6/起步.html" class="nav-link">
  ES6文档
</a></li></ul></div></div><div class="nav-item"><a href="/notes/" class="nav-link">
  notes
</a></div><div class="nav-item"><a href="/mine/" class="nav-link">
  blog
</a></div> <a href="https://github.com/zhongyongfeng/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue.js Menu" class="dropdown-title"><span class="title">Vue.js</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/Vue.js.html" class="nav-link">
  Vue.js
</a></li><li class="dropdown-item"><!----> <a href="/vue/VueRouter/" class="nav-link">
  Vue-Router
</a></li><li class="dropdown-item"><!----> <a href="/vue/Vuex/" class="nav-link">
  Vuex
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React Menu" class="dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react/react/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/react/redux/" class="nav-link">
  Redux
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CSS Menu" class="dropdown-title"><span class="title">CSS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/css3/css3/" class="nav-link">
  css3
</a></li><li class="dropdown-item"><!----> <a href="/百分比/百分比/" class="nav-link">
  流式布局
</a></li><li class="dropdown-item"><!----> <a href="/rem/rem/" class="nav-link">
  rem
</a></li><li class="dropdown-item"><!----> <a href="/flex/flex/" class="nav-link">
  flex
</a></li><li class="dropdown-item"><!----> <a href="/less/less/" class="nav-link">
  Less
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript Menu" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/jQuery/jQuery/" class="nav-link">
  jQuery
</a></li><li class="dropdown-item"><!----> <a href="/ES6/起步.html" class="nav-link">
  ES6文档
</a></li></ul></div></div><div class="nav-item"><a href="/notes/" class="nav-link">
  notes
</a></div><div class="nav-item"><a href="/mine/" class="nav-link">
  blog
</a></div> <a href="https://github.com/zhongyongfeng/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/vue/VueRouter.html" class="active sidebar-link">Vue-Router</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/VueRouter.html#起步" class="sidebar-link">起步</a></li><li class="sidebar-sub-header"><a href="/vue/VueRouter.html#使用路由" class="sidebar-link">使用路由</a></li><li class="sidebar-sub-header"><a href="/vue/VueRouter.html#修改默认配置" class="sidebar-link">修改默认配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/VueRouter.html#通过代码跳转路由" class="sidebar-link">通过代码跳转路由</a></li></ul></li><li class="sidebar-sub-header"><a href="/vue/VueRouter.html#动态路由" class="sidebar-link">动态路由</a></li><li class="sidebar-sub-header"><a href="/vue/VueRouter.html#路由的懒加载" class="sidebar-link">路由的懒加载</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/VueRouter.html#懒加载的方式" class="sidebar-link">懒加载的方式</a></li></ul></li><li class="sidebar-sub-header"><a href="/vue/VueRouter.html#路由嵌套" class="sidebar-link">路由嵌套</a></li><li class="sidebar-sub-header"><a href="/vue/VueRouter.html#路由传参" class="sidebar-link">路由传参</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/VueRouter.html#传递参数的方式" class="sidebar-link">传递参数的方式</a></li></ul></li><li class="sidebar-sub-header"><a href="/vue/VueRouter.html#导航守卫" class="sidebar-link">导航守卫</a></li><li class="sidebar-sub-header"><a href="/vue/VueRouter.html#keep-alive" class="sidebar-link">keep-alive</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="起步"><a href="#起步" class="header-anchor">#</a> 起步</h2> <div class="custom-block tip"><p class="custom-block-title">路由</p> <p>路由是一个网络工程里面的术语。</p> <p>路由（routing）就是通过互联的网络把信息从源地址传输到目的地址的活动</p></div> <p>路由器提供了两种机制: 路由和转送.
路由是决定数据包从来源到目的地的路径.
转送将输入端的数据转移到合适的输出端.</p> <p>路由中有一个非常重要的概念叫路由表.
路由表本质上就是一个映射表, 决定了数据包的指向.</p> <p>创建脚手架:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>vue init webpack vuerouter
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在创建脚手架的同时,会出现出一个是否安装<code>vue-router</code>的选项,此处可以选是也可以选否,选否的话后期通过项目下的终端也可以安装<code>vue-router</code></p> <p>步骤一:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install vue-router --save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>安装了<code>vue-router</code>后会在项目文件下多出来一个<code>router文件夹</code>,此时里面放置了<code>index.js</code>,这个是<code>vue-router的配置文件</code></p> <p>步骤二: 在模块化工程中使用它(因为是一个插件, 所以可以通过<code>Vue.use()来安装路由功能</code>)</p> <p>第一步：导入路由对象，并且调用 <code>Vue.use(VueRouter)</code></p> <p>第二步：创建路由实例，并且传入路由映射配置</p> <p>第三步：在Vue实例中挂载创建的路由实例</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200318190638.png" alt=""></p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200318184510.png" alt=""></p> <h2 id="使用路由"><a href="#使用路由" class="header-anchor">#</a> 使用路由</h2> <div class="custom-block tip"><p class="custom-block-title">使用路由</p> <p>第一步: 创建路由组件</p> <p>第二步: 配置路由映射: 组件和路径映射关系</p> <p>第三步: 使用路由: 通过<code>&lt;router-link&gt;</code>和<code>&lt;router-view&gt;</code></p></div> <p>创建路由组件</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200318191015.png" alt=""></p> <p>配置组件和路径的映射关系</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200318191435.png" alt=""></p> <p>使用路由</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200318192034.png" alt=""></p> <p>页面效果</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200318192220.png" alt=""></p> <p><code>&lt;router-link&gt;</code>: 该标签是一个<code>vue-router</code>中已经内置的组件, 它会被<code>渲染成一个&lt;a&gt;标签</code></p> <p><code>&lt;router-view&gt;</code>: 该标签会根据当前的路径, <code>动态渲染出不同的组件</code>.</p> <p>网页的其他内容, 比如顶部的<code>标题/导航</code>, 或者底部的一些版权信息等会和<code>&lt;router-view&gt;处于同一个等级</code></p> <p>在路由切换时, 切换的是<code>&lt;router-view&gt;挂载的组件</code>, 其他内容不会发生改变</p> <h2 id="修改默认配置"><a href="#修改默认配置" class="header-anchor">#</a> 修改默认配置</h2> <p>默认情况下,<code>地址栏之间的切换有一个#号</code>,我们不想使用这个#号(URL的hash),想用<code>HTML5的history</code>,使用这个也非常简单,只需要在配置文件下router实例里面加一条命令.同时还有<code>router-link</code>会将跳转的按钮默认识别成一个a标签(超链接跳转),<code>a标签的样式为router-link-active</code>,不想使用这个类名的话也可以加一条命令</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200318130038.png" alt=""></p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200318193550.png" alt=""></p> <p><code>&lt;router-link&gt;</code>还有一些其他属性
<code>&lt;router-link to='/home' tag='li'&gt;</code></p> <p><code>tag:</code> tag可以指定<code>&lt;router-link&gt;之后渲染成什么组件</code>, 比如上面的代码会被<code>渲染成一个&lt;li&gt;元素, 而不是&lt;a&gt;</code></p> <p><code>replace:</code> replace不会留下history记录, 所以指定replace的情况下, 后退键返回<code>不能返回到上一个页面中</code></p> <p><code>active-class</code>: 当<code>&lt;router-link&gt;</code>对应的路由匹配成功时, 会自动给当前元素设置一个<code>router-link-active的class</code>,设置active-class可以修改默认的名称.</p> <p>默认情况下, 进入网站的首页, 我们希望<code>&lt;router-view&gt;</code>渲染首页的内容.
但是我们的实现中, 默认没有显示首页组件, 必须让用户点击才可以.</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200318131105.png" alt=""></p> <p>我们在routes中又配置了一个映射.</p> <p>path配置的是根路径: /
redirect是重定向, 也就是我们将根路径重定向到/home的路径下, 这样就可以得到我们想要的结果了.</p> <h3 id="通过代码跳转路由"><a href="#通过代码跳转路由" class="header-anchor">#</a> 通过代码跳转路由</h3> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200318195242.png" alt=""></p> <h2 id="动态路由"><a href="#动态路由" class="header-anchor">#</a> 动态路由</h2> <p>在某些情况下，一个页面的path路径可能是不确定的，比如我们进入用户界面时，希望是如下的路径：</p> <p>/user/aaaa或/user/bbbb</p> <p>除了有前面的/user之外，后面还跟上了用户的ID
这种path和Component的匹配关系，我们称之为动态路由(也是路由传递数据的一种方式)。</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200318202155.png" alt=""></p> <p>想要达成以上的效果</p> <p>步骤:</p> <p>1.创建一个新的组件User,在index.js里面引入组件,写url和映射关系</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200318202912.png" alt=""></p> <p>2.在App.vue里面加上<code>router-link(跳转User组件)</code>,绑定userid</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200318202731.png" alt=""></p> <p>3.希望path地址跳转后也显示该用户下面的内容,再写一个h2标签,里面包含userid自己的名字.</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200318203702.png" alt=""></p> <p>最终页面展示效果如下</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200318203646.png" alt=""></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>$route是new出来的VueRouter对象的方法</p> <p>$router是谁处于活跃对象拿到的对象</p></div> <h2 id="路由的懒加载"><a href="#路由的懒加载" class="header-anchor">#</a> 路由的懒加载</h2> <p>打包过后的dist文件</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200319111649.png" alt=""></p> <p>当打包构建应用时，Javascript 包会变得非常大，影响页面加载。
如果我们能把不同路由对应的组件分割成不同的代码块，然后当路由被访问的时候才加载对应组件，这样就更加高效了</p> <p>路由中通常会定义很多不同的页面.
这个页面最后被打包在哪里呢? 一般情况下, 是放在一个js文件中.
但是, 页面这么多放在一个js文件中, 必然会造成这个页面非常的大.
如果我们一次性从服务器请求下来这个页面, 可能需要花费一定的时间, 甚至用户的电脑上还出现了短暂空白的情况.
如何避免这种情况呢? 使用路由懒加载就可以</p> <div class="custom-block tip"><p class="custom-block-title">路由懒加载作用</p> <p>路由懒加载的主要作用就是将路由对应的组件打包成一个个的js代码块.</p> <p>只有在这个路由被访问到的时候, 才加载对应的组件</p></div> <p>以前的写法:</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200319120315.png" alt=""></p> <p>现在的写法:</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200319120404.png" alt=""></p> <p>在案例中</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200319120709.png" alt=""></p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200319120836.png" alt=""></p> <h3 id="懒加载的方式"><a href="#懒加载的方式" class="header-anchor">#</a> 懒加载的方式</h3> <p>方式一:结合Vue的异步组件和Webpack的代码分析</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">Home</span> <span class="token operator">=</span> <span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'../components/Home.vue'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../components/Home.vue'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>方式二: AMD写法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">About</span> <span class="token operator">=</span> <span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'../components/About.vue'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> resolve<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>方式三: 在ES6中, 我们可以有更加简单的写法来组织Vue异步组件和Webpack的代码分割</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">Home</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/Home.vue'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在上部的案例当中,我们用到的就是方式三,也是最常用的.</p> <h2 id="路由嵌套"><a href="#路由嵌套" class="header-anchor">#</a> 路由嵌套</h2> <p>比如在home页面中, 我们希望通过/home/news和/home/message访问一些内容.</p> <p>一个路径映射一个组件, 访问这两个路径也会分别渲染两个组件</p> <p>路由和组件的关系如下:</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200319185350.png" alt=""></p> <div class="custom-block tip"><p class="custom-block-title">实现嵌套路由有两个步骤</p> <p>创建对应的子组件, 并且在路由映射中配置对应的子路由</p> <p>在组件内部使用<code>&lt;router-view&gt;</code>标签</p></div> <p>创建对应子组件,配置映射关系</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200319185754.png" alt=""></p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200319190228.png" alt=""></p> <p>在组件内部使用<code>&lt;router-view&gt;</code>标签</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200319190350.png" alt=""></p> <p>最终效果</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200319190550.png" alt=""></p> <h2 id="路由传参"><a href="#路由传参" class="header-anchor">#</a> 路由传参</h2> <h3 id="传递参数的方式"><a href="#传递参数的方式" class="header-anchor">#</a> 传递参数的方式</h3> <p>传递参数主要有两种类型: params和query</p> <div class="custom-block tip"><p class="custom-block-title">params的类型</p> <p>配置路由格式: /router/:id(动态路由)</p> <p>传递的方式: 在path后面跟上对应的值</p> <p>传递后形成的路径: /router/123, /router/abc</p></div> <div class="custom-block tip"><p class="custom-block-title">query的类型</p> <p>配置路由格式: /router, 也就是普通配置</p> <p>传递的方式: 对象中使用query的key作为传递方式</p> <p>传递后形成的路径: /router?id=123, /router?id=abc</p></div> <p>由于params类型上面的userid案例已经讲过,所以这里就不再多做赘述.</p> <p>query类型:
1.创建一个组件Profile组件,在index.js下引入,配置映射地址,在APP.vue里面配置router-link来进行访问.</p> <p>第一种传参方式:router-link</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200319213710.png" alt=""></p> <p>第二种传参方式:JavaScript代码</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200319213924.png" alt=""></p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200319214155.png" alt=""></p> <p>两种都可以实现,最终页面效果如下.</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200319214409.png" alt=""></p> <h2 id="导航守卫"><a href="#导航守卫" class="header-anchor">#</a> 导航守卫</h2> <div class="custom-block tip"><p class="custom-block-title">什么是导航守卫?</p> <p>vue-router提供的导航守卫主要用来监听监听路由的进入和离开的.</p> <p>vue-router提供了beforeEach和afterEach的钩子函数, 它们会在路由即将改变前和改变后触发.</p></div> <p>网页标题是通过<code>&lt;title&gt;</code>来显示的, 但是SPA只有一个固定的HTML, 切换不同的页面时, 标题并不会改变,我们可以通过JavaScript来修改<code>&lt;title&gt;</code>的内容.<code>window.document.title = '新的标题'</code>.但是如果组件多了的话不容易维护,(因为要在多个页面执行类似的代码)</p> <p>我们可以利用beforeEach来完成标题的修改,首先, 我们可以在钩子当中定义一些标题, 可以利用meta来定义</p> <p>其次, 利用导航守卫,修改我们的标题</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200319224811.png" alt=""></p> <p>最终效果:</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200319230431.png" alt=""></p> <div class="custom-block tip"><p class="custom-block-title">导航钩子的三个参数解析</p> <p>to: 即将要进入的目标的路由对象</p> <p>from: 当前导航即将要离开的路由对象</p> <p>next: 调用该方法后, 才能进入下一个钩子</p></div> <p>如果是后置钩子, 也就是afterEach, 不需要主动调用next()函数.</p> <h2 id="keep-alive"><a href="#keep-alive" class="header-anchor">#</a> keep-alive</h2> <p>router-view 也是一个组件，如果直接被包在 keep-alive 里面，所有路径匹配到的视图组件都会被缓存</p> <p>keep-alive 是 Vue 内置的一个组件，可以使被包含的组件保留状态，或避免重新渲染</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200320111118.png" alt=""></p> <p>activated/deactivated这两个生命周期函数,只有该组件保持了状态了使用了keep-alive时,才是有效的</p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200320111753.png" alt=""></p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200320111842.png" alt=""></p> <p><img src="https://cdn.jsdelivr.net/gh/zhongyongfeng/blogimg/img/20200320112737.png" alt=""></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.da8279db.js" defer></script><script src="/assets/js/2.09c1df90.js" defer></script><script src="/assets/js/64.cb833996.js" defer></script><script src="/assets/js/3.c0db3266.js" defer></script>
  </body>
</html>
